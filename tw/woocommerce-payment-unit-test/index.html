<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/tw/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/tw/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/tw/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/tw/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/tw/css/main.css">


<link rel="stylesheet" href="/tw/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"oberonlai.blog","root":"/tw/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1}}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideDownIn","sidebar":"slideDownIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="先來回顧一下目前鐵人付外掛的資料夾結構： iron-pay ├── composer.json ├── composer.lock ├── iron-pay.php ├── src │   ├── Gateways │   │   ├── CreditCard.php │   │   ├── Request.php │   │   ├── Response.php │   │   └── Virt">
<meta property="og:type" content="article">
<meta property="og:title" content="WooCommerce 金流串接實戰（十ㄧ）- 導入單元測試">
<meta property="og:url" content="https://oberonlai.blog/tw/woocommerce-payment-unit-test/">
<meta property="og:site_name" content="WordPress 開發日常">
<meta property="og:description" content="先來回顧一下目前鐵人付外掛的資料夾結構： iron-pay ├── composer.json ├── composer.lock ├── iron-pay.php ├── src │   ├── Gateways │   │   ├── CreditCard.php │   │   ├── Request.php │   │   ├── Response.php │   │   └── Virt">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-unit-test/wordpress-unit-test-01.jpg">
<meta property="og:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-unit-test/wordpress-unit-test-02.jpg">
<meta property="article:published_time" content="2021-09-26T08:00:00.000Z">
<meta property="article:modified_time" content="2021-09-26T08:15:11.934Z">
<meta property="article:author" content="賴俊吾 &#x2F; Oberon Lai">
<meta property="article:tag" content="WooCommerce 金流">
<meta property="article:tag" content="WordPress 外掛">
<meta property="article:tag" content="WooCommerce 外掛">
<meta property="article:tag" content="自動化測試">
<meta property="article:tag" content="單元測試">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oberonlai.blog/wp-content/uploads/wordpress-unit-test/wordpress-unit-test-01.jpg">
<meta property="og:image" content="/tw/images/og-img.jpg" />

<link rel="canonical" href="https://oberonlai.blog/tw/woocommerce-payment-unit-test/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>WooCommerce 金流串接實戰（十ㄧ）- 導入單元測試 | WordPress 開發日常</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163107142-1"></script>
    <script data-pjax>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-163107142-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/tw/" class="brand" rel="start" style="display: block">
        <img class="logo-img" src="/tw/images/logo-w.svg" alt="WordPress 開發日常">
    </a>
      <p class="site-subtitle" itemprop="description">有任何 WordPress 客製需求歡迎與我聯絡！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-關於我">

    <a href="/tw/about/" rel="section">關於我</a>

  </li>
        <li class="menu-item menu-item-合作方式">

    <a href="/tw/how-can-oberon-help-you/" rel="section">合作方式</a>

  </li>
        <li class="menu-item menu-item-計價方式">

    <a href="/tw/how-do-i-make-a-quotation/" rel="section">計價方式</a>

  </li>
        <li class="menu-item menu-item-學習-wordpress">

    <a href="/tw/wordpress-full-stack/" rel="section">學習 WordPress</a>

  </li>
        <li class="menu-item menu-item-與我聯繫">

    <a href="mailto:m615926@gmail.com" rel="noopener" target="_blank">與我聯繫</a>

  </li>
        <li class="menu-item menu-item-訂閱">

    <a href="https://successful-trader-4225.ck.page/bbe15da0e6" rel="noopener" target="_blank">訂閱</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/oberonlai" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://oberonlai.blog/tw/woocommerce-payment-unit-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/tw/images/avatar.jpg">
      <meta itemprop="name" content="賴俊吾 / Oberon Lai">
      <meta itemprop="description" content="現為全職 WordPress 工程師，網站開發經歷 11 年，專攻前端工程與 WordPress 佈景主題、外掛客製化開發">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WordPress 開發日常">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          WooCommerce 金流串接實戰（十ㄧ）- 導入單元測試
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              

              <time title="創建時間：2021-09-26 16:00:00 / 修改時間：16:15:11" itemprop="dateCreated datePublished" datetime="2021-09-26T16:00:00+08:00">2021-09-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tw/categories/WooCommerce/" itemprop="url" rel="index"><span itemprop="name">WooCommerce</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="文章字數">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>9k</span>
            </span>
            <span class="post-meta-item" title="所需閱讀時間">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>8 分鐘</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>先來回顧一下目前鐵人付外掛的資料夾結構：</p>
<pre class="line-numbers language-none"><code class="language-none">iron-pay
├── composer.json
├── composer.lock
├── iron-pay.php
├── src
│   ├── Gateways
│   │   ├── CreditCard.php
│   │   ├── Request.php
│   │   ├── Response.php
│   │   └── VirtualAccount.php
│   ├── Options.php
│   ├── Posts
│   │   └── ShopOrder
│   │       └── Metabox.php
│   └── Utility.php
└── vendor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>通常我們會新增一個 tests 資料夾來放入測試的類別，並且其目錄結構會完全比照 src 裡面的所有內容，以及在既有的檔名後面加入 Test 的後綴，具體的結構如下：</p>
<pre class="line-numbers language-none"><code class="language-none">iron-pay
├── composer.json
├── composer.lock
├── iron-pay.php
├── src
│   ├── Gateways
│   │   ├── CreditCard.php
│   │   ├── Request.php
│   │   ├── Response.php
│   │   └── VirtualAccount.php
│   ├── Options.php
│   ├── Posts
│   │   └── ShopOrder
│   │       └── Metabox.php
│   └── Utility.php
├── tests
│   ├── Gateways
│   │   ├── CreditCardTest.php
│   │   ├── RequestTest.php
│   │   ├── ResponseTest.php
│   │   └── VirtualAccountTest.php
│   ├── OptionsTest.php
│   ├── Posts
│   │   └── ShopOrder
│   │       └── MetaboxTest.php
│   └── UtilityTest.php
└── vendor<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在本文中會專注於測試 Utility 這個類別，這個類別主要有兩個方法，第一個是測試產生金流商驗證演算法的計算結果是否有符合預期，第二個是測試取得商店代號的格式是否正確。</p>
<span id="more"></span>

<p>首先看到 <code>Utility.php</code> 的內容：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Irp</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Utility</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// 略</span>

	<span class="token comment">/**
	 * Build pass code for api usage.
	 *
	 * @param string $args args.
	 * @param string $secret API secret.
	 * @return string
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">generate_sign</span><span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token variable">$secret</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token variable">$post_datastr</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
		<span class="token keyword">foreach</span> <span class="token punctuation">(</span> <span class="token variable">$args</span> <span class="token keyword">as</span> <span class="token variable">$name</span> <span class="token operator">=></span> <span class="token variable">$value</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">is_array</span><span class="token punctuation">(</span> <span class="token variable">$value</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$value</span> <span class="token operator">!==</span> <span class="token constant">null</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$value</span> <span class="token operator">!==</span> <span class="token string single-quoted-string">''</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
					<span class="token variable">$post_datastr</span> <span class="token operator">=</span> <span class="token variable">$post_datastr</span> <span class="token operator">.</span> <span class="token variable">$name</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'='</span> <span class="token operator">.</span> <span class="token variable">$value</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&amp;'</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token variable">$tmp_array</span>  <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'&amp;'</span><span class="token punctuation">,</span> <span class="token function">trim</span><span class="token punctuation">(</span> <span class="token variable">$post_datastr</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'&amp;'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">sort</span><span class="token punctuation">(</span> <span class="token variable">$tmp_array</span><span class="token punctuation">,</span> <span class="token constant">SORT_STRING</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$source</span>     <span class="token operator">=</span> <span class="token function">implode</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'&amp;'</span><span class="token punctuation">,</span> <span class="token variable">$tmp_array</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$source_key</span> <span class="token operator">=</span> <span class="token variable">$source</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&amp;key='</span> <span class="token operator">.</span> <span class="token variable">$secret</span><span class="token punctuation">;</span>
		<span class="token variable">$sign</span>       <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span> <span class="token function">md5</span><span class="token punctuation">(</span> <span class="token variable">$source_key</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token variable">$sign</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token comment">/**
	 * Get stord id
	 *
	 * @return string
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token function">get_option</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'irp_store_id'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>這篇示範測試其中兩個靜態方法： <code>generate_sign()</code> 與 <code>get_store_id()</code> 。</p>
<p>為了要能夠測試，把程式碼寫得易於測試是非常重要的，易於測試的其中一個原則就是要有返回結果，有這個結果才能在測試時進行比對，同時在使用這個方法時也能預先處理沒有取得預期結果的情況。</p>
<p>準備好測試對象已經測試檔案後，接下來我們透過 Composer 安裝測試套件 PHPUnit，可以把它安裝在專案的目錄之下，或是可以裝在全域的環境下，這樣以後每個專案都可以直接使用 PHPUnit 的指令而無需再個別安裝，這邊介紹全域的安裝方式。</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">$ composer global require phpunit&#x2F;phpunit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>接下來切換到專案資料夾，執行 phpunit，看到以下訊息即代表安裝成功：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">iron-pay$ phpunit

PHPUnit 9.5.4 by Sebastian Bergmann and contributors.

Usage:
  phpunit [options] UnitTest.php
  phpunit [options] &lt;directory&gt;

Code Coverage Options:
  --coverage-clover &lt;file&gt;    Generate code coverage report in Clover XML format
  --coverage-cobertura &lt;file&gt; Generate code coverage report in Cobertura XML format
  --coverage-crap4j &lt;file&gt;    Generate code coverage report in Crap4J XML format<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>首先進行 PHPUnit 的初始化：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">iron-pay$ phpunit --generate-configuration<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>會看到以下 PHPUnit 詢問的問題：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">Bootstrap script (relative to path shown above; default: vendor&#x2F;autoload.php): 
Tests directory (relative to path shown above; default: tests): 
Source directory (relative to path shown above; default: src): 
Cache directory (relative to path shown above; default: .phpunit.cache): 

Generated phpunit.xml in &#x2F;Users&#x2F;oberonlai&#x2F;Sites&#x2F;woocommerce&#x2F;wp-content&#x2F;plugins&#x2F;iron-pay.
Make sure to exclude the .phpunit.cache directory from version control.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>第一個問題會需要指定 Bootstrap 的檔案路徑，這個檔案是用來做自動載入的設定以及存放一些全域變數的檔案，預設的話會是 Composer 的 <code>autoload.php</code> 這個檔案。</p>
<p>其他問題會問你是否要修改測試目錄、原始檔目錄以及快取目錄的路徑，這些都採用預設值即可，完成後記得把 <code>.phpunit.cache</code> 目錄在版控中忽略掉，設定完成後可以在外掛根目錄看到一個 <code>phpunit.xml</code> 的設定檔，之後要修改 PHPUnit 的設定都可以在這個檔案調整。</p>
<p>通常我們要執行測試時，需要到終端機下指令輸入 phpunit，但畢竟還要切換介面會稍微增加進行測試的阻力，如果這時候你是使用 VSCode 的話，建議可以安裝由 Recca Tsai 開發的 <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=recca0120.vscode-phpunit">PHPUnit Test Explorer</a> 測試套件。</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-unit-test/wordpress-unit-test-01.jpg"></p>
<p>它可以直接在 VSCode 的面板中管理已經寫好的測試項目，透過介面點選要執行的測試，更方便之處在於可以透過快捷鍵來進行測試，這樣可以大幅增加執行測試的效率。</p>
<p>VScode 還有另外一個寫測試超好用的提示工具，它是由 Winnie Lin 開發的 <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=onecentlin.phpunit-snippets">PHPUnit Snippets</a> 套件，只要輸入關鍵字 pu:，就能自動帶入寫測試時的框架，完全不需要再自己手動輸入，尤其像我這種手殘黨特別適用。</p>
<p>安裝好兩款測試套件後，我們還需要更新  compose.json 檔，加入 autoload 的指定路徑，並且新增 autoload-dev 的 tests 載入，這讓 PHPUnit 可以抓到 src 裡面的類別：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"autoload"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
	<span class="token property">"psr-4"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token property">"Irp\\"</span><span class="token operator">:</span> <span class="token string">"src"</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token property">"autoload-dev"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
	<span class="token property">"psr-4"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token property">"Irp\\Tests\\"</span><span class="token operator">:</span> <span class="token string">"tests/"</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>路徑是根據命名空間指定的，更新完後記得要執行 dump 指令才會重新產生自動載入的檔案：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">iron-pay$ composer dump<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>準備好以上所有寫測試的環境後，我們就來開始實作 UtilityTest.php，測試的基本架構如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Irp<span class="token punctuation">\</span>Tests</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Irp<span class="token punctuation">\</span>Utility</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * UtilityTest
 *
 * @group group
 */</span>
<span class="token keyword">class</span> <span class="token class-name">UtilityTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span> <span class="token punctuation">&#123;</span>

	<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// code</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// code</span>
	<span class="token punctuation">&#125;</span>


	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test_generate_sign</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// Test</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test_get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// Test</span>
	<span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>測試類別從 <code>TestCase</code> 繼承而來，<code>setUp()</code> 會在執行測試方法前觸發，因此可以把要測試的類別建立以及相關變數放在這邊，那麼在測試中就可以取得這些內容。</p>
<p>相反的 <code>tearDown()</code> 則是在每一個測試跑完的當下會被觸發，如果需要在測試完後還原某些資料或是重設設定，就可以放在這個方法之中。</p>
<p>所有的測試方法要加入 test 前綴，並且盡量遵循 Arrange、Act、Assert 的 3A 架構：</p>
<ul>
<li>Arrange 指的是測試前的初始資料準備，像是預期的結果、變數的初始值等等。</li>
<li>Act 是呼叫測試對象的方法，藉此取得執行該方法後的返回結果。</li>
<li>Assert 斷言，也就是檢查 Act 中的返回結果跟 Arrange 裡面的預期結果是否吻合。</li>
</ul>
<h2 id="測試加密演算法"><a href="#測試加密演算法" class="headerlink" title="測試加密演算法"></a>測試加密演算法</h2><p>接下來我們實作 <code>test_generate_sign()</code> ，這邊我想測試的是當參數傳入之後，是否有產出我們所期待的演算結果。鐵人付的加密演算邏輯為傳入參數經過整理後與店家金鑰組合做 MD5 雜湊，因此金鑰應為必填欄位，測試程式碼如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test_generate_sign</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// Arrange.</span>
	<span class="token variable">$args</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
		<span class="token string single-quoted-string">'nonce_str'</span>       <span class="token operator">=></span> <span class="token number">71669965</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'orgno'</span>           <span class="token operator">=></span> <span class="token number">1265</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'secondtimestamp'</span> <span class="token operator">=></span> <span class="token number">1489215551</span><span class="token punctuation">,</span>
		<span class="token string single-quoted-string">'total_fee'</span>       <span class="token operator">=></span> <span class="token number">8888</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token variable">$secret</span>   <span class="token operator">=</span> <span class="token string single-quoted-string">'12345'</span><span class="token punctuation">;</span>
	<span class="token variable">$expected</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'B59951E5AA2E6FCA1596253E2978ED2B'</span><span class="token punctuation">;</span>

	<span class="token comment">// Act.</span>
	<span class="token variable">$actual</span> <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">generate_sign</span><span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">,</span> <span class="token variable">$secret</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Assert.</span>
	<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected</span><span class="token punctuation">,</span> <span class="token variable">$actual</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Arrange 的部分先設定要傳入的變數，以及預期的演算結果，Act 則是執行 <code>generate_sign()</code> 並將結果存在 $actual 變數中，最後的 Assert 則是檢查這兩個變數是否有符合預期結果，<code>assertEquals()</code> 是判斷傳入的兩個變數值是否相等。</p>
<p>接下來切換到 VSCode 左側面板找到燒杯的圖案，就能看到一個測試項目，這時候點選上面的播放圖示或是用快捷鍵輸入 Cmd + t + s 就能執行測試，記得 t 跟 s 不用同時，只要按住 Cmd 先按 t 再按 s 即可，也可以點擊下圖中間箭頭處的 Run 來執行：</p>
<p><img src="https://oberonlai.blog/wp-content/uploads/wordpress-unit-test/wordpress-unit-test-02.jpg"></p>
<p>順利的話就能在下方的 Output 視窗看到測試結果，當然，你也可以在終端機輸入 phpunit 來執行測試。</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">PHPUnit 9.5.9 by Sebastian Bergmann and contributors.

Runtime:       PHP 7.4.13
Configuration: &#x2F;Users&#x2F;oberonlai&#x2F;Sites&#x2F;woocommerce&#x2F;wp-content&#x2F;plugins&#x2F;iron-pay&#x2F;phpunit.xml

R                                                                   1 &#x2F; 1 (100%)

Time: 00:00.016, Memory: 6.00 MB

There was 1 risky test:

1) Irp\Tests\UtilityTest::test_generate_sign
This test does not have a @covers annotation but is expected to have one

OK, but incomplete, skipped, or risky tests!
Tests: 1, Assertions: 1, Risky: 1.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>這邊我們會發現雖然測試通過了，但出現一個提示訊息說：This test does not have a @covers annotation but is expected to have one，這代表我們沒有這個方法沒有標記要測試哪些項目，更多關於 annotation 的用法可以參考官方文件。</p>
<p>這邊我們先忽略它，要關閉這個提示的話開啟 phpunit.xml，找到 <code>forceCoversAnnotation</code> 設定為 false 即可：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">forceCoversAnnotation="false"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>再執行一次測試就可以看到通過的訊息：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">PHPUnit 9.5.9 by Sebastian Bergmann and contributors.

Runtime:       PHP 7.4.13
Configuration: &#x2F;Users&#x2F;oberonlai&#x2F;Sites&#x2F;woocommerce&#x2F;wp-content&#x2F;plugins&#x2F;iron-pay&#x2F;phpunit.xml

.                                                                   1 &#x2F; 1 (100%)

Time: 00:00.018, Memory: 6.00 MB

OK (1 test, 1 assertion)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="測試取得商店代號"><a href="#測試取得商店代號" class="headerlink" title="測試取得商店代號"></a>測試取得商店代號</h2><p>第二個我們要測試的是 <code>get_store_id()</code>，這方法我們要測試的是從資料庫取得的商店代號的位數是否為 8 碼，以及是否皆整數。先回到這個方法的實作：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token function">get_option</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'irp_payment_orgno'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>可以看到裡面只有一個 <code>get_option()</code>，這個方法是 WordPress 取得 wp_options 資料表的函式，但在這邊我們只是要驗證 <code>get_store_id()</code> 返回的資料是否正確，而非 <code>get_option()</code> 是否能正確的從資料庫取得資料，再加上我們要隔離外部環境也就是資料庫的操作，因此我們不能直接呼叫 WordPress 的函式，而是要用模擬的方式來做出假的結果，藉此來確保我們自己寫出來的程式是正確的。</p>
<p>而模擬的方法叫做測試分身 - Test Doubles，我們這邊使用 PHPMock 來模擬 <code>get_option()</code>，先透過 Composer 來進行安裝，記得要加 –dev 來指定該套件只用開發環境：</p>
<pre class="line-numbers language-sh" data-language="sh"><code class="language-sh">iron-pay$ composer require --dev php-mock&#x2F;php-mock-phpunit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>然後使用 PHPMock 來模擬 <code>get_option()</code>：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">namespace</span> <span class="token package">UnitTestDemo</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">phpmock<span class="token punctuation">\</span>phpunit<span class="token punctuation">\</span>PHPMock</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UtilityTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">use</span> <span class="token package">PHPMock</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 略</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test_get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// Arrange.</span>
		<span class="token variable">$get_option</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">getFunctionMock</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Irp'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'get_option'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$get_option</span><span class="token operator">-></span><span class="token function">expects</span><span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token operator">-></span><span class="token function">with</span><span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">equalTo</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'irp_payment_orgno'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token operator">-></span><span class="token function">willReturn</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'mystoreid'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token variable">$expected</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'mystoreid'</span><span class="token punctuation">;</span>

		<span class="token comment">// Act.</span>
		<span class="token variable">$actual</span> <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Assert.</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected</span><span class="token punctuation">,</span> <span class="token variable">$actual</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>變數 <code>$get_option</code> 就是模擬出來的對象，它透過 <code>getFunctionMock()</code> 來建立分身，第一個參數傳的是命名空間，第二個是要模擬的函式名稱，接下來呼叫 expects、will、willReturn 三個方法，第一個 expects 的參數為 <code>$this-&gt;once()</code>，代表在這個測試中只會呼叫一次我們自己做出來的 <code>get_option()</code>。</p>
<p>第二個 with 代表要傳入這個假方法的參數，也就是原本方法的裡面的 <code>return get_option( &#39;irp_store_id&#39; )</code> 的 <code>irp_store_id</code> 欄位名稱，第三個 willReturn 代表的是這個假方法會回傳的結果，也就是商店代號，最後就可以檢查是否吻合。</p>
<p>測試寫到這邊，會發現到測試對象 <code>get_store_id()</code> 並不完整，它既沒有檢查資料是否有正確取得以及格式是否正確，而這也是寫測試的最大好處，為了要能夠寫測試，會思考到當下沒有考慮到的情境，我們把 <code>get_store_id()</code> 重構如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token variable">$store_id</span> <span class="token operator">=</span> <span class="token function">get_option</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'irp_store_id'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">empty</span><span class="token punctuation">(</span> <span class="token variable">$store_id</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token string single-quoted-string">'未輸入商店代號'</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span> <span class="token variable">$stord_id</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token string single-quoted-string">'商店代號限定數字'</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">strlen</span><span class="token punctuation">(</span> <span class="token variable">$stord_id</span> <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">8</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token string single-quoted-string">'商店代號須為 8 碼'</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	
	<span class="token keyword">return</span> <span class="token variable">$store_id</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>回到測試裡面，將原本的 <code>$get_option</code> 修改為執行四次，並且每次都回傳不同的結果：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">class</span> DemoTest <span class="token keyword">extends</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>PHPUnit_Framework_TestCase</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">use</span> <span class="token package">PHPMock</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test_get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token variable">$get_option</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">getFunctionMock</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'Irp'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'get_option'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$get_option</span><span class="token operator">-></span><span class="token function">expects</span><span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">exactly</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token operator">-></span><span class="token function">with</span><span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">equalTo</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'irp_payment_orgno'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token operator">-></span><span class="token function">willReturnOnConsecutiveCalls</span><span class="token punctuation">(</span>
						<span class="token string single-quoted-string">'12345678'</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">''</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'abc123'</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'123'</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$expected</span>        <span class="token operator">=</span> <span class="token string single-quoted-string">'12345678'</span><span class="token punctuation">;</span>
		<span class="token variable">$expected_empty</span>  <span class="token operator">=</span> <span class="token string single-quoted-string">'未輸入商店代號'</span><span class="token punctuation">;</span>
		<span class="token variable">$expected_number</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'商店代號限定數字'</span><span class="token punctuation">;</span>
		<span class="token variable">$expected_length</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'商店代號須為 8 碼'</span><span class="token punctuation">;</span>

		<span class="token comment">// Act.</span>
		<span class="token variable">$actual</span>        <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$actual_empty</span>  <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$actual_number</span> <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$actual_length</span> <span class="token operator">=</span> <span class="token class-name static-context">Utility</span><span class="token operator">::</span><span class="token function">get_store_id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Assert.</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected</span><span class="token punctuation">,</span> <span class="token variable">$actual</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected_empty</span><span class="token punctuation">,</span> <span class="token variable">$actual_empty</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected_number</span><span class="token punctuation">,</span> <span class="token variable">$actual_number</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$this</span><span class="token operator">-></span><span class="token function">assertEquals</span><span class="token punctuation">(</span> <span class="token variable">$expected_length</span><span class="token punctuation">,</span> <span class="token variable">$actual_length</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>原本使用 <code>willReturn()</code> 來模擬傳回一個結果，現在改用 <code>willReturnOnConsecutiveCalls()</code> 傳回四個，第一個是正確的格式，另外三個是例外情況，然後分別對應到在例外情況下 <code>test_get_store_id()</code> 會回傳的結果。</p>
<p>除了使用 PHPMock 來模擬內建的函式外，在社群中也有提供針對 WordPress 使用的測試替身，像是 <a target="_blank" rel="noopener" href="https://github.com/10up/wp_mock">WP_Mock</a> 以及 <a target="_blank" rel="noopener" href="https://brain-wp.github.io/BrainMonkey/">Brain Mockey</a>，PHP 也有一套專門的測試框架叫做 <a target="_blank" rel="noopener" href="https://codeception.com/">CodeCeption</a>，而用在 WordPress 上面的叫做 <a target="_blank" rel="noopener" href="https://wpbrowser.wptestkit.dev/">wp-browser</a>，另外還有針對 WooCommerce 的 <a target="_blank" rel="noopener" href="https://github.com/level-level/wp-browser-woocommerce">wp-browser-woocommerce</a>，這些工具讓我們可以更無痛的導入測試流程。</p>
<p>寫測試的價值在於讓我們想到原本沒有想到的狀況，進而來改善原始程式碼對於例外情況的處理，這也是為什麼寫了測試反而可以省下除錯時間，因為當例外狀況都在我們的掌控之中，要追查問題出在哪裏就會很快，省去很多摸索的時間。</p>
<p>在業界流行一種測試驅動開發 ( Test-Driven Development ) 的流程，先把測試寫完再去真正實作功能的開發，寫測試的當下就能先思考這個類別該如何使用以及可能會有的例外情況，把一切都考慮進去想清楚後再來動手，就能減少很多修改程式的時間。</p>
<p>但要測試開發的功能能否在真實世界正常運作，我們還需要整合測試與端對端測試，下一篇我們先介紹端對端測試，也就是透過模擬使用者的操作行為來進行測。</p>

        <hr>
        <div>
          <h2>覺得文章寫得好再幫我鼓個掌吧！</h2>
          <iframe width="100%" height="230px" scrolling="no" frameborder="0" id="player" src="https://button.like.co/in/embed/oberonlai/button/?referrer=https://oberonlai.blog/tw/woocommerce-payment-unit-test/" allowfullscreen="true"></iframe>
        </div>
        <hr>
        <h2>這是電子報訂閱，一週一次絕對沒有壯陽藥廣告～</h2>
        <p>過往內容：<a target="_blank" rel="noopener" href="https://successful-trader-4225.ck.page/posts">https://successful-trader-4225.ck.page/posts</a></p>
        <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
        <form action="https://app.convertkit.com/forms/2577901/subscriptions" style="background-color: rgb(255, 255, 255); border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; max-width: none!important;" class="seva-form formkit-form" method="post" data-sv-form="2577901" data-uid="bbe15da0e6" data-format="inline" data-version="5" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;訂閱成功，再幫我收信確認下吧！&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:false,&quot;url&quot;:&quot;https://convertkit.com?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}" min-width="400 500 600 700 800"><div data-style="full" style="--bg-border-radius: 3px;"><div data-element="column" class="formkit-column"><div class="formkit-header" style="color: rgb(83, 83, 83); font-size: 28px; font-weight: 400;" data-element="header"></div><div class="formkit-content" style="color: rgb(105, 113, 119);" data-element="content"><p>Hi，我是 Oberon，我會固定在每週五早上發送接案心得以及與 WordPress 相關的電子報，同時也會分享一些基礎的開發知識，讓你在 WordPress 的接案路上不孤單！</p></div><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" data-stacked="true" class="seva-fields formkit-fields"><div class="formkit-field"><input class="formkit-input" name="email_address" style="color: rgb(139, 139, 139); border-color: rgb(221, 224, 228); font-weight: 400; background-color: rgb(243, 246, 249); border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px;" aria-label="電子郵件" placeholder="電子郵件" required="" type="email"></div><div class="formkit-field"><input class="formkit-input" aria-label="您的大名" style="color: rgb(139, 139, 139); border-color: rgb(221, 224, 228); font-weight: 400; background-color: rgb(243, 246, 249); border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px;" name="fields[first_name]" placeholder="您的大名" type="text"></div><button data-element="submit" class="formkit-submit formkit-submit" style="color: rgb(255, 255, 255); background-color: rgb(113, 173, 137); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; font-weight: 700;"><div class="formkit-spinner"><div></div><div></div><div></div></div><span style="font-size: 16px;">訂閱電子報</span></button></div><div class="formkit-disclaimer" style="color: rgb(139, 139, 139); font-size: 13px;" data-element="disclaimer"><p>免費電子報，可隨時取消訂閱，沒有壓力！</p></div></div><div data-element="column" style="background-image: url(&quot;https://embed.filekitcdn.com/e/2SvCbYvt2MQD58GK3N3L5a/qAepSutQWFcsUd4u3qHwKy&quot;);" class="formkit-background"></div></div><style>.formkit-form[data-uid="bbe15da0e6"] *{box-sizing:border-box;}.formkit-form[data-uid="bbe15da0e6"]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.formkit-form[data-uid="bbe15da0e6"] legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table;}.formkit-form[data-uid="bbe15da0e6"] fieldset{border:0;padding:0.01em 0 0 0;margin:0;min-width:0;}.formkit-form[data-uid="bbe15da0e6"] body:not(:-moz-handler-blocked) fieldset{display:table-cell;}.formkit-form[data-uid="bbe15da0e6"] h1,.formkit-form[data-uid="bbe15da0e6"] h2,.formkit-form[data-uid="bbe15da0e6"] h3,.formkit-form[data-uid="bbe15da0e6"] h4,.formkit-form[data-uid="bbe15da0e6"] h5,.formkit-form[data-uid="bbe15da0e6"] h6{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="bbe15da0e6"] h2{font-size:1.5em;margin:1em 0;}.formkit-form[data-uid="bbe15da0e6"] h3{font-size:1.17em;margin:1em 0;}.formkit-form[data-uid="bbe15da0e6"] p{color:inherit;font-size:inherit;font-weight:inherit;}.formkit-form[data-uid="bbe15da0e6"] ol:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] ul:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] blockquote:not([template-default]){text-align:left;}.formkit-form[data-uid="bbe15da0e6"] p:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] hr:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] blockquote:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] ol:not([template-default]),.formkit-form[data-uid="bbe15da0e6"] ul:not([template-default]){color:inherit;font-style:initial;}.formkit-form[data-uid="bbe15da0e6"] .ordered-list,.formkit-form[data-uid="bbe15da0e6"] .unordered-list{list-style-position:outside !important;padding-left:1em;}.formkit-form[data-uid="bbe15da0e6"] .list-item{padding-left:0;}.formkit-form[data-uid="bbe15da0e6"][data-format="modal"]{display:none;}.formkit-form[data-uid="bbe15da0e6"][data-format="slide in"]{display:none;}.formkit-form[data-uid="bbe15da0e6"][data-format="sticky bar"]{display:none;}.formkit-sticky-bar .formkit-form[data-uid="bbe15da0e6"][data-format="sticky bar"]{display:block;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input,.formkit-form[data-uid="bbe15da0e6"] .formkit-select,.formkit-form[data-uid="bbe15da0e6"] .formkit-checkboxes{width:100%;}.formkit-form[data-uid="bbe15da0e6"] .formkit-button,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit{border:0;border-radius:5px;color:#ffffff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;cursor:pointer;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle;}.formkit-form[data-uid="bbe15da0e6"] .formkit-button:hover,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit:hover,.formkit-form[data-uid="bbe15da0e6"] .formkit-button:focus,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit:focus{outline:none;}.formkit-form[data-uid="bbe15da0e6"] .formkit-button:hover > span,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit:hover > span,.formkit-form[data-uid="bbe15da0e6"] .formkit-button:focus > span,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit:focus > span{background-color:rgba(0,0,0,0.1);}.formkit-form[data-uid="bbe15da0e6"] .formkit-button > span,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit > span{display:block;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;padding:12px 24px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input{background:#ffffff;font-size:15px;padding:12px;border:1px solid #e3e3e3;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;line-height:1.4;margin:0;-webkit-transition:border-color ease-out 300ms;transition:border-color ease-out 300ms;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input:focus{outline:none;border-color:#1677be;-webkit-transition:border-color ease 300ms;transition:border-color ease 300ms;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input::-webkit-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input::-moz-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input:-ms-input-placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input::placeholder{color:inherit;opacity:0.8;}.formkit-form[data-uid="bbe15da0e6"] [data-group="dropdown"]{position:relative;display:inline-block;width:100%;}.formkit-form[data-uid="bbe15da0e6"] [data-group="dropdown"]::before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent transparent;border-style:solid;border-width:6px 6px 0 6px;height:0;width:0;z-index:999;}.formkit-form[data-uid="bbe15da0e6"] [data-group="dropdown"] select{height:auto;width:100%;cursor:pointer;color:#333333;line-height:1.4;margin-bottom:0;padding:0 6px;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px;padding-right:25px;border:1px solid #e3e3e3;background:#ffffff;}.formkit-form[data-uid="bbe15da0e6"] [data-group="dropdown"] select:focus{outline:none;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"]{text-align:left;margin:0;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"]{margin-bottom:10px;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] *{cursor:pointer;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"]:last-of-type{margin-bottom:0;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]{display:none;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"] + label::after{content:none;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::after{border-color:#ffffff;content:"";}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] input[type="checkbox"]:checked + label::before{background:#10bf7a;border-color:#10bf7a;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] label{position:relative;display:inline-block;padding-left:28px;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] label::before,.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] label::after{position:absolute;content:"";display:inline-block;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] label::before{height:16px;width:16px;border:1px solid #e3e3e3;background:#ffffff;left:0px;top:3px;}.formkit-form[data-uid="bbe15da0e6"] [data-group="checkboxes"] [data-group="checkbox"] label::after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%;}.formkit-form[data-uid="bbe15da0e6"] .formkit-alert:empty{display:none;}.formkit-form[data-uid="bbe15da0e6"] .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c;}.formkit-form[data-uid="bbe15da0e6"] .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110;}.formkit-form[data-uid="bbe15da0e6"] .formkit-spinner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:0px;width:0px;margin:0 auto;position:absolute;top:0;left:0;right:0;width:0px;overflow:hidden;text-align:center;-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.formkit-form[data-uid="bbe15da0e6"] .formkit-spinner > div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:0.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-bbe15da0e6- 1.4s infinite ease-in-out both;animation:formkit-bouncedelay-formkit-form-data-uid-bbe15da0e6- 1.4s infinite ease-in-out both;}.formkit-form[data-uid="bbe15da0e6"] .formkit-spinner > div:nth-child(1){-webkit-animation-delay:-0.32s;animation-delay:-0.32s;}.formkit-form[data-uid="bbe15da0e6"] .formkit-spinner > div:nth-child(2){-webkit-animation-delay:-0.16s;animation-delay:-0.16s;}.formkit-form[data-uid="bbe15da0e6"] .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-submit[data-active] .formkit-spinner ~ span{opacity:0;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;z-index:5;margin:10px 0;position:relative;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit-container[data-active="false"]{opacity:0.35;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#ffffff;border:1px solid #dce1e5;border-radius:4px;color:#373f45;cursor:pointer;display:block;height:36px;margin:0 auto;opacity:0.95;padding:0;-webkit-text-decoration:none;text-decoration:none;text-indent:100%;-webkit-transition:ease-in-out all 200ms;transition:ease-in-out all 200ms;white-space:nowrap;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:190px;background-repeat:no-repeat;background-position:center;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='%23373F45'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='%23373F45'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='%23373F45'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='%23373F45'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='%23373F45'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='%23373F45'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='%23373F45'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='%23373F45'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='%23373F45'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='%23373F45'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='%23373F45'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='%23373F45'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='%23373F45'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='%23373F45'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='%23373F45'/%3E%3C/svg%3E");}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit:hover,.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit:focus{background-color:#ffffff;-webkit-transform:scale(1.025) perspective(1px);-ms-transform:scale(1.025) perspective(1px);transform:scale(1.025) perspective(1px);opacity:1;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit[data-variant="dark"],.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit[data-variant="light"]{background-color:transparent;border-color:transparent;width:166px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit[data-variant="light"]{color:#ffffff;background-image:url("data:image/svg+xml;charset=utf8,%3Csvg width='162' height='20' viewBox='0 0 162 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M83.0561 15.2457C86.675 15.2457 89.4722 12.5154 89.4722 9.14749C89.4722 5.99211 86.8443 4.06563 85.1038 4.06563C82.6801 4.06563 80.7373 5.76407 80.4605 8.28551C80.4092 8.75244 80.0387 9.14403 79.5686 9.14069C78.7871 9.13509 77.6507 9.12841 76.9314 9.13092C76.6217 9.13199 76.3658 8.88106 76.381 8.57196C76.4895 6.38513 77.2218 4.3404 78.618 2.76974C80.1695 1.02445 82.4289 0 85.1038 0C89.5979 0 93.8406 4.07791 93.8406 9.14749C93.8406 14.7608 89.1832 19.3113 83.1517 19.3113C78.8502 19.3113 74.5179 16.5041 73.0053 12.5795C72.9999 12.565 72.9986 12.5492 73.0015 12.534C73.0218 12.4179 73.0617 12.3118 73.1011 12.2074C73.1583 12.0555 73.2143 11.907 73.2062 11.7359L73.18 11.1892C73.174 11.0569 73.2075 10.9258 73.2764 10.8127C73.3452 10.6995 73.4463 10.6094 73.5666 10.554L73.7852 10.4523C73.9077 10.3957 74.0148 10.3105 74.0976 10.204C74.1803 10.0974 74.2363 9.97252 74.2608 9.83983C74.3341 9.43894 74.6865 9.14749 75.0979 9.14749C75.7404 9.14749 76.299 9.57412 76.5088 10.1806C77.5188 13.1 79.1245 15.2457 83.0561 15.2457Z' fill='white'/%3E%3Cpath d='M155.758 6.91365C155.028 6.91365 154.804 6.47916 154.804 5.98857C154.804 5.46997 154.986 5.06348 155.758 5.06348C156.53 5.06348 156.712 5.46997 156.712 5.98857C156.712 6.47905 156.516 6.91365 155.758 6.91365ZM142.441 12.9304V9.32833L141.415 9.32323V8.90392C141.415 8.44719 141.786 8.07758 142.244 8.07986L142.441 8.08095V6.55306L144.082 6.09057V8.08073H145.569V8.50416C145.569 8.61242 145.548 8.71961 145.506 8.81961C145.465 8.91961 145.404 9.01047 145.328 9.08699C145.251 9.16351 145.16 9.2242 145.06 9.26559C144.96 9.30698 144.853 9.32826 144.745 9.32822H144.082V12.7201C144.082 13.2423 144.378 13.4256 144.76 13.4887C145.209 13.5629 145.583 13.888 145.583 14.343V14.9626C144.029 14.9626 142.441 14.8942 142.441 12.9304Z' fill='white'/%3E%3Cpath d='M110.058 7.92554C108.417 7.88344 106.396 8.92062 106.396 11.5137C106.396 14.0646 108.417 15.0738 110.058 15.0318C111.742 15.0738 113.748 14.0646 113.748 11.5137C113.748 8.92062 111.742 7.88344 110.058 7.92554ZM110.07 13.7586C108.878 13.7586 108.032 12.8905 108.032 11.461C108.032 10.1013 108.878 9.20569 110.071 9.20569C111.263 9.20569 112.101 10.0995 112.101 11.459C112.101 12.8887 111.263 13.7586 110.07 13.7586Z' fill='white'/%3E%3Cpath d='M118.06 7.94098C119.491 7.94098 120.978 8.33337 120.978 11.1366V14.893H120.063C119.608 14.893 119.238 14.524 119.238 14.0689V10.9965C119.238 9.66506 118.747 9.16047 117.891 9.16047C117.414 9.16047 116.797 9.52486 116.502 9.81915V14.069C116.502 14.1773 116.481 14.2845 116.44 14.3845C116.398 14.4845 116.337 14.5753 116.261 14.6519C116.184 14.7284 116.093 14.7891 115.993 14.8305C115.893 14.8719 115.786 14.8931 115.678 14.8931H114.847V8.10918H115.773C115.932 8.10914 116.087 8.16315 116.212 8.26242C116.337 8.36168 116.424 8.50033 116.46 8.65577C116.881 8.19328 117.428 7.94098 118.06 7.94098ZM122.854 8.09713C123.024 8.09708 123.19 8.1496 123.329 8.2475C123.468 8.34541 123.574 8.48391 123.631 8.64405L125.133 12.8486L126.635 8.64415C126.692 8.48402 126.798 8.34551 126.937 8.2476C127.076 8.1497 127.242 8.09718 127.412 8.09724H128.598L126.152 14.3567C126.091 14.5112 125.986 14.6439 125.849 14.7374C125.711 14.831 125.549 14.881 125.383 14.8809H124.333L121.668 8.09713H122.854Z' fill='white'/%3E%3Cpath d='M135.085 14.5514C134.566 14.7616 133.513 15.0416 132.418 15.0416C130.496 15.0416 129.024 13.9345 129.024 11.4396C129.024 9.19701 130.451 7.99792 132.191 7.99792C134.338 7.99792 135.254 9.4378 135.158 11.3979C135.139 11.8029 134.786 12.0983 134.38 12.0983H130.679C130.763 13.1916 131.562 13.7662 132.615 13.7662C133.028 13.7662 133.462 13.7452 133.983 13.6481C134.535 13.545 135.085 13.9375 135.085 14.4985V14.5514ZM133.673 10.949C133.785 9.87621 133.061 9.28752 132.191 9.28752C131.321 9.28752 130.734 9.93979 130.679 10.9489L133.673 10.949Z' fill='white'/%3E%3Cpath d='M137.345 8.11122C137.497 8.11118 137.645 8.16229 137.765 8.25635C137.884 8.35041 137.969 8.48197 138.005 8.62993C138.566 8.20932 139.268 7.94303 139.759 7.94303C139.801 7.94303 140.068 7.94303 140.489 7.99913V8.7265C140.489 9.11748 140.15 9.4147 139.759 9.4147C139.31 9.4147 138.651 9.5829 138.131 9.8773V14.8951H136.462V8.11112L137.345 8.11122ZM156.6 14.0508V8.09104H155.769C155.314 8.09104 154.944 8.45999 154.944 8.9151V14.8748H155.775C156.23 14.8748 156.6 14.5058 156.6 14.0508ZM158.857 12.9447V9.34254H157.749V8.91912C157.749 8.46401 158.118 8.09506 158.574 8.09506H158.857V6.56739L160.499 6.10479V8.09506H161.986V8.51848C161.986 8.97359 161.617 9.34254 161.161 9.34254H160.499V12.7345C160.499 13.2566 160.795 13.44 161.177 13.503C161.626 13.5774 162 13.9024 162 14.3574V14.977C160.446 14.977 158.857 14.9086 158.857 12.9447ZM98.1929 10.1124C98.2033 6.94046 100.598 5.16809 102.895 5.16809C104.171 5.16809 105.342 5.44285 106.304 6.12953L105.914 6.6631C105.654 7.02011 105.16 7.16194 104.749 6.99949C104.169 6.7702 103.622 6.7218 103.215 6.7218C101.335 6.7218 99.9169 7.92849 99.9068 10.1123C99.9169 12.2959 101.335 13.5201 103.215 13.5201C103.622 13.5201 104.169 13.4717 104.749 13.2424C105.16 13.0799 105.654 13.2046 105.914 13.5615L106.304 14.0952C105.342 14.7819 104.171 15.0566 102.895 15.0566C100.598 15.0566 98.2033 13.2842 98.1929 10.1124ZM147.619 5.21768C148.074 5.21768 148.444 5.58663 148.444 6.04174V9.81968L151.82 5.58131C151.897 5.47733 151.997 5.39282 152.112 5.3346C152.227 5.27638 152.355 5.24607 152.484 5.24611H153.984L150.166 10.0615L153.984 14.8749H152.484C152.355 14.8749 152.227 14.8446 152.112 14.7864C151.997 14.7281 151.897 14.6436 151.82 14.5397L148.444 10.3025V14.0508C148.444 14.5059 148.074 14.8749 147.619 14.8749H146.746V5.21768H147.619Z' fill='white'/%3E%3Cpath d='M0.773438 6.5752H2.68066C3.56543 6.5752 4.2041 6.7041 4.59668 6.96191C4.99219 7.21973 5.18994 7.62695 5.18994 8.18359C5.18994 8.55859 5.09326 8.87061 4.8999 9.11963C4.70654 9.36865 4.42822 9.52539 4.06494 9.58984V9.63379C4.51611 9.71875 4.84717 9.88721 5.05811 10.1392C5.27197 10.3882 5.37891 10.7266 5.37891 11.1543C5.37891 11.7314 5.17676 12.1841 4.77246 12.5122C4.37109 12.8374 3.81152 13 3.09375 13H0.773438V6.5752ZM1.82373 9.22949H2.83447C3.27393 9.22949 3.59473 9.16064 3.79688 9.02295C3.99902 8.88232 4.1001 8.64502 4.1001 8.31104C4.1001 8.00928 3.99023 7.79102 3.77051 7.65625C3.55371 7.52148 3.20801 7.4541 2.7334 7.4541H1.82373V9.22949ZM1.82373 10.082V12.1167H2.93994C3.37939 12.1167 3.71045 12.0332 3.93311 11.8662C4.15869 11.6963 4.27148 11.4297 4.27148 11.0664C4.27148 10.7324 4.15723 10.4849 3.92871 10.3237C3.7002 10.1626 3.35303 10.082 2.88721 10.082H1.82373Z' fill='white'/%3E%3Cpath d='M13.011 6.5752V10.7324C13.011 11.207 12.9084 11.623 12.7034 11.9805C12.5012 12.335 12.2068 12.6089 11.8201 12.8022C11.4363 12.9927 10.9763 13.0879 10.4402 13.0879C9.6433 13.0879 9.02368 12.877 8.5813 12.4551C8.13892 12.0332 7.91772 11.4531 7.91772 10.7148V6.5752H8.9724V10.6401C8.9724 11.1704 9.09546 11.5615 9.34155 11.8135C9.58765 12.0654 9.96557 12.1914 10.4753 12.1914C11.4656 12.1914 11.9607 11.6714 11.9607 10.6313V6.5752H13.011Z' fill='white'/%3E%3Cpath d='M15.9146 13V6.5752H16.9649V13H15.9146Z' fill='white'/%3E%3Cpath d='M19.9255 13V6.5752H20.9758V12.0991H23.696V13H19.9255Z' fill='white'/%3E%3Cpath d='M28.2828 13H27.2325V7.47607H25.3428V6.5752H30.1724V7.47607H28.2828V13Z' fill='white'/%3E%3Cpath d='M41.9472 13H40.8046L39.7148 9.16796C39.6679 9.00097 39.6093 8.76074 39.539 8.44727C39.4687 8.13086 39.4262 7.91113 39.4116 7.78809C39.3823 7.97559 39.3339 8.21875 39.2665 8.51758C39.2021 8.81641 39.1479 9.03905 39.1039 9.18554L38.0405 13H36.8979L36.0673 9.7832L35.2236 6.5752H36.2958L37.2143 10.3193C37.3578 10.9199 37.4604 11.4502 37.5219 11.9102C37.5541 11.6611 37.6025 11.3828 37.6669 11.0752C37.7314 10.7676 37.79 10.5186 37.8427 10.3281L38.8886 6.5752H39.9301L41.0024 10.3457C41.1049 10.6943 41.2133 11.2158 41.3276 11.9102C41.3715 11.4912 41.477 10.958 41.644 10.3105L42.558 6.5752H43.6215L41.9472 13Z' fill='white'/%3E%3Cpath d='M45.7957 13V6.5752H46.846V13H45.7957Z' fill='white'/%3E%3Cpath d='M52.0258 13H50.9755V7.47607H49.0859V6.5752H53.9155V7.47607H52.0258V13Z' fill='white'/%3E%3Cpath d='M61.2312 13H60.1765V10.104H57.2146V13H56.1643V6.5752H57.2146V9.20312H60.1765V6.5752H61.2312V13Z' fill='white'/%3E%3C/svg%3E");}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-bbe15da0e6-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes formkit-bouncedelay-formkit-form-data-uid-bbe15da0e6-{0%,80%,100%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}40%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}.formkit-form[data-uid="bbe15da0e6"] blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #e1e1e1;}.formkit-form[data-uid="bbe15da0e6"] .seva-custom-content{padding:15px;font-size:16px;color:#fff;mix-blend-mode:difference;} .formkit-form[data-uid="bbe15da0e6"]{box-shadow:0px 4px 8px rgba(105,113,119,0.2);max-width:740px !important;overflow:hidden;}.formkit-form[data-uid="bbe15da0e6"] [data-style="full"]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.formkit-form[data-uid="bbe15da0e6"] .formkit-background{background-position:center center;background-size:cover;height:280px;margin:20px;border-radius:var(--bg-border-radius) !important;}.formkit-form[data-uid="bbe15da0e6"] .formkit-column{padding:20px;position:relative;-webkit-order:2;-ms-flex-order:2;order:2;}.formkit-form[data-uid="bbe15da0e6"] .formkit-header{margin-top:0;margin-bottom:24px;font-weight:700;font-size:calc(30px + (36 - 30) * ((100vw - 400px) / (600 - 400)));}@media all and (min-width:800px){.formkit-form[data-uid="bbe15da0e6"] .formkit-header{font-size:36px;}}.formkit-form[data-uid="bbe15da0e6"] .formkit-header h2{line-height:1.2;margin-top:0;}.formkit-form[data-uid="bbe15da0e6"] .formkit-content{margin-bottom:45px;font-size:16px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.formkit-form[data-uid="bbe15da0e6"] .formkit-field{margin:0 0 10px 0;}.formkit-form[data-uid="bbe15da0e6"] .formkit-input{width:100%;border:0;padding-left:12px;padding-right:0;height:47px;font-size:14px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-select{padding-top:13px !important;padding-bottom:13px !important;border:0 !important;}.formkit-form[data-uid="bbe15da0e6"] .formkit-checkboxes{background:transparent !important;color:inherit !important;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields .formkit-submit{margin-top:8px;font-size:12px;height:47px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields .formkit-submit span{padding:15px 14px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields[data-stacked="false"]{margin-left:-4px;margin-right:-4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields[data-stacked="false"] .formkit-submit{-webkit-flex:1 1 auto !important;-ms-flex:1 1 auto !important;flex:1 1 auto !important;margin:0 !important;min-width:90px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields[data-stacked="false"] .formkit-field,.formkit-form[data-uid="bbe15da0e6"] .formkit-fields[data-stacked="false"] .formkit-submit{margin:0 4px 8px 4px !important;}.formkit-form[data-uid="bbe15da0e6"] .formkit-fields[data-stacked="false"] .formkit-field{-webkit-flex:100 1 auto !important;-ms-flex:100 1 auto !important;flex:100 1 auto !important;margin:0;}.formkit-form[data-uid="bbe15da0e6"] .formkit-powered-by-convertkit-container{margin:20px 0 0 0;}.formkit-form[data-uid="bbe15da0e6"] .formkit-disclaimer{font-size:12px;opacity:0.6;margin-top:6px;}.formkit-form[data-uid="bbe15da0e6"] .formkit-field,.formkit-form[data-uid="bbe15da0e6"] .formkit-submit{margin:0 0 8px 0;-webkit-flex:1 0 100%;-ms-flex:1 0 100%;flex:1 0 100%;}@media screen and (min-width:600px){.formkit-form[data-uid="bbe15da0e6"] [data-style="full"]{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}.formkit-form[data-uid="bbe15da0e6"] [data-style="full"] .formkit-column{width:57%;}.formkit-form[data-uid="bbe15da0e6"] [data-style="full"] .formkit-background{width:44%;height:auto;margin-left:0;-webkit-order:2;-ms-flex-order:2;order:2;}.formkit-slide-in,.preview .formkit-form[data-uid="bbe15da0e6"][data-format="slide in"],.formkit-form[data-uid="bbe15da0e6"][data-format="slide in-editing"]{max-width:450px !important;}.formkit-slide-in [data-style="full"],.preview .formkit-form[data-uid="bbe15da0e6"][data-format="slide in"] [data-style="full"],.formkit-form[data-uid="bbe15da0e6"][data-format="slide in-editing"] [data-style="full"]{-webkit-flex-direction:column !important;-ms-flex-direction:column !important;flex-direction:column !important;max-width:450px !important;}.formkit-slide-in .formkit-background,.preview .formkit-form[data-uid="bbe15da0e6"][data-format="slide in"] .formkit-background,.formkit-form[data-uid="bbe15da0e6"][data-format="slide in-editing"] .formkit-background{width:auto !important;height:280px !important;margin:20px !important;-webkit-order:0 !important;-ms-flex-order:0 !important;order:0 !important;}.formkit-slide-in .formkit-column,.preview .formkit-form[data-uid="bbe15da0e6"][data-format="slide in"] .formkit-column,.formkit-form[data-uid="bbe15da0e6"][data-format="slide in-editing"] .formkit-column{width:100% !important;-webkit-order:2 !important;-ms-flex-order:2 !important;order:2 !important;padding:20px 20px 30px 20px !important;}.formkit-slide-in .formkit-content,.preview .formkit-form[data-uid="bbe15da0e6"][data-format="slide in"] .formkit-content,.formkit-form[data-uid="bbe15da0e6"][data-format="slide in-editing"] .formkit-content{margin-bottom:25px !important;}.formkit-form[data-uid="bbe15da0e6"] .formkit-column{padding:55px 60px 55px 45px;}} </style></form>
    </div>

    
    
    


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tw/tags/WooCommerce-%E9%87%91%E6%B5%81/" rel="tag"><i class="fa fa-tag"></i> WooCommerce 金流</a>
              <a href="/tw/tags/WordPress-%E5%A4%96%E6%8E%9B/" rel="tag"><i class="fa fa-tag"></i> WordPress 外掛</a>
              <a href="/tw/tags/WooCommerce-%E5%A4%96%E6%8E%9B/" rel="tag"><i class="fa fa-tag"></i> WooCommerce 外掛</a>
              <a href="/tw/tags/%E8%87%AA%E5%8B%95%E5%8C%96%E6%B8%AC%E8%A9%A6/" rel="tag"><i class="fa fa-tag"></i> 自動化測試</a>
              <a href="/tw/tags/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6/" rel="tag"><i class="fa fa-tag"></i> 單元測試</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/tw/woocommerce-payment-testing/" rel="prev" title="WooCommerce 金流串接實戰（十）- 自動化測試">
      <i class="fa fa-chevron-left"></i> WooCommerce 金流串接實戰（十）- 自動化測試
    </a></div>
      <div class="post-nav-item">
    <a href="/tw/woocommerce-payment-e2e/" rel="next" title="WooCommerce 金流串接實戰（十二）- 端對端測試">
      WooCommerce 金流串接實戰（十二）- 端對端測試 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="賴俊吾 / Oberon Lai"
      src="/tw/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">賴俊吾 / Oberon Lai</p>
  <div class="site-description" itemprop="description">現為全職 WordPress 工程師，網站開發經歷 11 年，專攻前端工程與 WordPress 佈景主題、外掛客製化開發</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/tw/archives">
          <span class="site-state-item-count">291</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/tw/categories/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tw/tags/">
        <span class="site-state-item-count">91</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/oberonlai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;oberonlai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:m615926@gmail.com" title="E-Mail → mailto:m615926@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/oberonlai" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;oberonlai" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/m615926" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;m615926" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">賴俊吾 / Oberon Lai</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="總字數">740k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">11:13</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/tw/lib/anime.min.js"></script>
  <script src="/tw/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>

<script src="/tw/js/utils.js"></script>


<script src="/tw/js/schemes/muse.js"></script>


<script src="/tw/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/tw/js/local-search.js"></script>













    <div id="pjax">
  

  

    </div>
</body>
</html>
